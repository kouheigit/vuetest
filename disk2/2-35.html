<!DOCTYPE html>
<html lang="ja">
 <head>
   <meta charset="UTF-8" />
   <title>2-33.html</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
 </head>
   <body>
   <style type="text/css">
     ul {
	     list-style-type: none;
	}
     .template {
	     display: none;
	}
    </style>
    <div class="container">
	<ul>
          <li><img src="../img/sample1.jpg" class ="image"width="400px"height="300px" alt="1"></li>
	  <li><img src="../img/sample2.jpg" class="image"width="400px"height="300px" alt="2"></li>
	  <li><img src="../img/sample3.jpg" class="image"width="400px"height="300px" alt="3"></li>
	</ul>
   </div>
   <div class="template">
     <li><img src="../img/intiki.jpg" class="image"width="400px"height="300px"></li>
   </div>
   <script>
	   var target = document.querySelector('ul');
           var template = document.querySelector('.template li');
   
           var count = 0;

      window.addEventListener('scroll', function(e) {

	      var current_position = window.innerHeight + window.scrollY;
	       var images = Array.from(document.querySelectorAll('.container .image'));

	      var size = images.length;
	      
	      var limit_position = images[size-1].offsetTop;

	      if( (limit_position + 50 ) < current_position) {
		      
		      var clone = template.cloneNode(true);
		      target.appendChild(clone);
		      console.log(++count + '枚画像を追加しました');
		}
      });
   </script>	
 </body>
</html>

